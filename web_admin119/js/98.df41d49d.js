"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[98],{13339:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"account-settings-info-view"},[e("a-form",{ref:"addUserform",attrs:{layout:"vertical",form:t.addUserform}},[e("a-row",{attrs:{gutter:16,type:"flex",justify:"center"}},[e("a-col",{attrs:{order:t.isMobile?2:1,md:24,lg:16}},[e("a-form-item",{attrs:{label:"网站名称"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["siteName",{rules:[{required:!0,message:"请输入您的网站名称"}]}],expression:"['siteName', { rules: [{ required: true, message: '请输入您的网站名称', }] }]"}],attrs:{placeholder:"请输入您的网站名称"}})],1),e("a-form-item",{attrs:{label:"在线客服链接"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["onlineService",{rules:[{required:!0,message:"请输入您的在线客服链接"}]}],expression:"['onlineService', { rules: [{ required: true, message: '请输入您的在线客服链接', }] }]"}],attrs:{placeholder:"请输入您的在线客服链接"}})],1),e("a-form-item",{attrs:{label:"网站logo"}},[e("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["siteLogo",{valuePropName:"file",rules:[{required:!0,message:"请上传网站logo"}]}],expression:"['siteLogo', { valuePropName: 'file', rules: [{ required: true, message: '请上传网站logo', }] }]"}],staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card",accept:".jpg,.jpeg,.png",showUploadList:!1,customRequest:t.customRequest}},[t.siteLogo?e("img",{attrs:{src:t.siteLogo,alt:"avatar"}}):e("div",[e("a-icon",{attrs:{type:t.imgloading?"loading":"plus"}})],1)])],1),e("a-form-item",[e("a-button",{attrs:{type:"primary"},on:{click:t.saveinfo}},[t._v("保存基本信息")])],1)],1)],1)],1),e("avatar-modal",{ref:"modal",on:{ok:t.setavatar}})],1)},n=[],i=(a(41539),a(54747),a(74438)),o=a(36196),s=a(59685),d=a(25030),u=a.n(d),l={mixins:[o.c],components:{AvatarModal:i.Z},data:function(){return{preview:{},option:{img:"/avatar2.jpg",info:!0,size:1,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:180,autoCropHeight:180,fixedBox:!0,fixed:!0,fixedNumber:[1,1]},settingdetail:{},addUserform:this.$form.createForm(this),fields:["siteName","onlineService","siteLogo"],siteLogo:"",imgloading:!1}},mounted:function(){this.getsetting()},methods:{setavatar:function(t){this.option.img=t},saveinfo:function(){var t=this,e=this.$refs.addUserform.form;e.validateFields((function(a,r){a||(r.id=t.settingdetail.id,(0,s.mQ)(r).then((function(a){0==a.status?(t.$message.success({content:"修改成功",duration:2}),e.resetFields(),t.getsetting()):t.$message.error({content:a.msg})})))}))},customRequest:function(t){var e=this;this.imgloading=!0;var a=new FormData;a.append("upload_file",t.file),(0,s.k4)(a).then((function(t){0==t.status?(e.siteLogo=t.data.url,e.addUserform.setFieldsValue({siteLogo:t.data.url})):e.$message.error({content:"上传失败请检查图片类型!"}),e.imgloading=!1}))},getsetting:function(){var t=this;(0,s.IV)().then((function(e){0==e.status&&(t.settingdetail=e.data,t.siteLogo=t.settingdetail.siteLogo,t.fields.forEach((function(e){return t.addUserform.getFieldDecorator(e)})),t.addUserform.setFieldsValue(u()(t.settingdetail,t.fields)))}))}}},f=l,c=a(70713),m=(0,c.Z)(f,r,n,!1,null,"5e168c9f",null),p=m.exports},59685:function(t,e,a){a.d(e,{Fl:function(){return u},IV:function(){return Z},JO:function(){return v},Nc:function(){return h},YU:function(){return c},Zn:function(){return l},c2:function(){return b},gg:function(){return p},iH:function(){return g},k4:function(){return d},kW:function(){return s},ls:function(){return m},mQ:function(){return P},t7:function(){return f},vr:function(){return y}});var r=a(27370),n=a(80129),i=a.n(n),o={artlist:"/admin/art/list.do",adminupload:"/admin/upload.do",artadd:"/admin/art/add.do",artupdate:"/admin/art/update.do",artdelArt:"/admin/art/delArt.do",bannerslist:"/admin/banners/list.do",bannersupdate:"/admin/banners/update.do",bannersadd:"/admin/banners/add.do",bannersdelete:"/admin/banners/delete.do",paylist:"/admin/pay/list.do",paydel:"/admin/pay/del.do",payadd:"/admin/pay/add.do",payupdate:"/admin/pay/update.do",sitegetInfo:"/api/site/getInfo.do",infoupdate:"/admin/info/update.do"};function s(t){return(0,r.ZP)({url:o.artlist,method:"post",data:i().stringify(t)})}function d(t){return(0,r.ZP)({url:o.adminupload,method:"post",data:t})}function u(t){return(0,r.ZP)({url:o.artadd,method:"post",data:i().stringify(t)})}function l(t){return(0,r.ZP)({url:o.artupdate,method:"post",data:i().stringify(t)})}function f(t){return(0,r.ZP)({url:o.artdelArt,method:"post",data:i().stringify(t)})}function c(t){return(0,r.ZP)({url:o.bannerslist,method:"post",data:i().stringify(t)})}function m(t){return(0,r.ZP)({url:o.bannersupdate,method:"post",data:i().stringify(t)})}function p(t){return(0,r.ZP)({url:o.bannersadd,method:"post",data:i().stringify(t)})}function g(t){return(0,r.ZP)({url:o.bannersdelete,method:"post",data:i().stringify(t)})}function v(t){return(0,r.ZP)({url:o.paylist,method:"post",data:i().stringify(t)})}function h(t){return(0,r.ZP)({url:o.paydel,method:"post",data:i().stringify(t)})}function y(t){return(0,r.ZP)({url:o.payadd,method:"post",data:i().stringify(t)})}function b(t){return(0,r.ZP)({url:o.payupdate,method:"post",data:i().stringify(t)})}function Z(t){return(0,r.ZP)({url:o.sitegetInfo,method:"post",data:i().stringify(t)})}function P(t){return(0,r.ZP)({url:o.infoupdate,method:"post",data:i().stringify(t)})}}}]);